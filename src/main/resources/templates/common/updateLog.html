<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>update logo</title>
    <script type="text/javascript" src="../js/jquery-3.3.1.js"></script>
    <script type="text/javascript" src="../lay/layui.js"></script>
    <link rel="stylesheet" href="../lay/css/layui.css" media="all">
</head>
<body style="background-color: grey">
<div class="layui-upload" style="margin-top: 2%;margin-left: 2%">
    <button type="button" class="layui-btn layui-btn-normal" id="test8">选择文件</button>
    <div class="layui-upload-list">
        <span style="color: #eb7350;font-size: 30px;font-family: 隶书">图片预览</span><br>
        <img src="" id="demo2" style="background-color: #5FB878;height: 200px;width: 200px">
        <button type="button" class="layui-btn" id="test9" style="margin-top: 140px">开始上传</button>
    </div>
</div>

</body>
<script>
    layui.use('upload', function () {
        let $ = layui.jquery
            , upload = layui.upload;
        //选完文件后不自动上传
        upload.render({
            elem: '#test8'
            , url: 'uploadImg'
            , auto: false    //true为自动上传
            , bindAction: "#test9"
            , size: 60        //文件大小 60k
            , exts: 'jpg|png' //文件后缀
            , multiple: false //false 代表不允许多文件上传
            //文件选择后出发before
            , choose: function (obj) {
                obj.preview(function (index, file, result) {
                    $("#demo2").attr("src", result);
                });
            }
            , done: function (res, upload, index) {
                if (res.code == 1) {
                    alert(res.msg);
                    window.location.href = 'info';
                }
            }
            , error(index, upload){
                location.reload();
                alert("修改失败");
            }
        });
    });
</script>
</html>